name: Cypress runner CI/CD
permissions:
  contents: write

on: [push]

jobs:
    cypress-run:
      runs-on: ubuntu-22.04
      container:
        image: cypress/browsers:node16.17.0-chrome106
        options: --user 1001
      steps:
        - name: Checkout
          uses: actions/checkout@v3
        - name: Cypress install
          run: npm install
        - name: Cypress run all tests ðŸ§ª
          uses: cypress-io/github-action@v4
          with:
            command: npm run cy:run:cicd
        - name: GH Pages Push
          uses: PavanMudigonda/html-reporter-github-pages/composite@v1.1 peaceiris/actions-gh-pages@v3.8.0
          with:
           test_results: ~/__w/Cypress-UI-TypeScript-Cucumber/Cypress-UI-TypeScript-Cucumber/cypress/reports/index.html
           keep_reports: 20
           
